{% load static %}
<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Gerenciamento de Senhas</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'atendimento/css/styles.css' %}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>
    <div class="container-fluid">
        <header class="bg-primary text-white py-3 mb-4">
            <div class="container">
                <h1 class="text-center"><i class="fas fa-ticket-alt me-2"></i>Sistema de Gerenciamento de Senhas</h1>
            </div>
        </header>

        <div class="container">
            <!-- Painel de Status -->
            <div class="row dashboard mb-4">
                <div class="col-md-4">
                    <div class="status-card">
                        <h4><i class="fas fa-users me-2"></i>Status da Fila</h4>
                        <div class="d-flex justify-content-between">
                            <p>Total na fila:</p>
                            <p><span id="total-fila" class="badge bg-primary">0</span></p>
                        </div>
                        <div class="d-flex justify-content-between">
                            <p>Senhas atendidas:</p>
                            <p><span id="total-atendidas" class="badge bg-success">0</span></p>
                        </div>
                        <div class="d-flex justify-content-between">
                            <p>Desistências:</p>
                            <p><span id="total-desistencias" class="badge bg-danger">0</span></p>
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="status-card">
                        <h4><i class="fas fa-clipboard-list me-2"></i>Próximas Senhas</h4>
                        <div id="proximas-senhas">
                            <p>Nenhuma senha na fila</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="status-card">
                        <h4><i class="fas fa-desktop me-2"></i>Próximo Atendimento</h4>
                        <p>Próximo posto disponível: <span id="proximo-posto" class="badge bg-info">-</span></p>
                    </div>
                </div>
            </div>
            
            <!-- Postos de Atendimento -->
            <div class="row mb-4">
                <div class="col-12">
                    <h3><i class="fas fa-building me-2"></i>Postos de Atendimento</h3>
                    <div id="postos" class="d-flex flex-wrap">
                        <!-- Os postos serão adicionados via JavaScript -->
                    </div>
                </div>
            </div>
            
            <!-- Controles -->
            <div class="row controles mb-4">
                <div class="col-md-12 d-flex justify-content-between">
                    <div>
                        <button id="btn-gerar-normal" class="btn btn-primary">
                            <i class="fas fa-plus-circle me-1"></i> Gerar Senha Normal
                        </button>
                        <button id="btn-gerar-prioritaria" class="btn btn-warning ms-2">
                            <i class="fas fa-plus-circle me-1"></i> Gerar Senha Prioritária
                        </button>
                    </div>
                    <div>
                        <button id="btn-chamar-proxima" class="btn btn-success">
                            <i class="fas fa-bullhorn me-1"></i> Chamar Próxima Senha
                        </button>
                        <button id="btn-simular-desistencia" class="btn btn-danger ms-2">
                            <i class="fas fa-user-times me-1"></i> Simular Desistência
                        </button>
                    </div>
                    <div>
                        <button id="btn-encerrar" class="btn btn-dark">
                            <i class="fas fa-power-off me-1"></i> Encerrar Simulação
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- Modo Automático -->
            <div class="row mb-4">
                <div class="col-12 text-center">
                    <div class="form-check form-switch d-inline-block">
                        <input class="form-check-input" type="checkbox" id="modo-automatico">
                        <label class="form-check-label" for="modo-automatico">
                            Modo Automático <i class="fas fa-robot ms-1"></i>
                        </label>
                    </div>
                </div>
            </div>
            
            <!-- Resultados -->
            <div id="resultados" class="mt-4" style="display: none;">
                <div class="card">
                    <div class="card-header bg-primary text-white">
                        <h3 class="m-0"><i class="fas fa-chart-bar me-2"></i>Resultados da Simulação</h3>
                    </div>
                    <div class="card-body">
                        <div>
                            <h4><i class="fas fa-list-ol me-2"></i>Senhas Atendidas (da última para a primeira):</h4>
                            <div id="lista-senhas-atendidas" class="mt-2"></div>
                        </div>
                        <div class="mt-3 row">
                            <div class="col-md-6">
                                <div class="alert alert-success">
                                    <h5>Total de senhas atendidas: <span id="resultado-total-atendidas">0</span></h5>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="alert alert-danger">
                                    <h5>Total de desistências: <span id="resultado-total-desistencias">0</span></h5>
                                </div>
                            </div>
                        </div>
                        <button id="btn-nova-simulacao" class="btn btn-primary mt-3">
                            <i class="fas fa-redo me-1"></i> Nova Simulação
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    <script src="{% static 'atendimento/js/simulation.js' %}"></script>
</body>
</html>